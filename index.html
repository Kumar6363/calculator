// Replace this portion in your HTML (inside the NDI tab panel)

<div id="ndi" class="tab-panel">
  <div class="card">
    <h2>üßæ NDI (Net Disposable Income) Checker</h2>
    <div class="input-group">
      <label>Monthly Gross Income (RM)</label>
      <input type="number" id="ndiGross" value="5000">
    </div>
    <div class="input-group">
      <label>EPF Deduction (%)</label>
      <input type="number" id="ndiEPF" value="12">
    </div>
    <div class="input-group">
      <label>SOCSO / Tax (RM)</label>
      <input type="number" id="ndiTax" value="200">
    </div>
    <div class="input-group">
      <label>Total Loan Commitments (RM)</label>
      <input type="number" id="ndiLoans" value="1500">
    </div>
    <div class="input-group">
      <label>Living Expenses (RM)</label>
      <input type="number" id="ndiLiving" value="200">
    </div>
    <button onclick="calculateNDI()">Calculate NDI</button>
    <div id="ndiResult" class="result-card" hidden></div>
  </div>
</div>

// Replace or add this function in your <script> section

function calculateNDI() {
  const gross = parseFloat(document.getElementById('ndiGross').value);
  const epfRate = parseFloat(document.getElementById('ndiEPF').value);
  const tax = parseFloat(document.getElementById('ndiTax').value);
  const loans = parseFloat(document.getElementById('ndiLoans').value);
  const living = parseFloat(document.getElementById('ndiLiving').value);

  if (isNaN(gross) || isNaN(epfRate) || isNaN(tax) || isNaN(loans) || isNaN(living)) return;

  const epf = gross * (epfRate / 100);
  const netIncome = gross - epf - tax - loans - living;

  let result = `
    <h3>Breakdown</h3>
    <p>Monthly Gross Income: RM ${gross.toFixed(2)}</p>
    <p>- EPF (${epfRate}%): RM ${epf.toFixed(2)}</p>
    <p>- SOCSO / Tax: RM ${tax.toFixed(2)}</p>
    <p>- Loan Commitments: RM ${loans.toFixed(2)}</p>
    <p>- Living Expenses: RM ${living.toFixed(2)}</p>
    <hr>
    <strong style="font-size:1.2rem; color:#28a745;">Net Disposable Income (NDI): RM ${netIncome.toFixed(2)}</strong>
    <br><br>
    ${netIncome > 1000 ? '<p style="color:green">‚úÖ Your NDI is healthy for new loan applications.</p>' : '<p style="color:red">‚ùå Your NDI may be too low for most loans.</p>'}
  `;

  const resultBox = document.getElementById('ndiResult');
  resultBox.innerHTML = result;
  resultBox.hidden = false;
}
